{%- assign books = site.data.books -%}
{%- assign bible = site.data.rst -%}
{%- assign endings = include.passage | split: "-" -%}
{%- assign start = endings[0] | split: " " -%}
{%- assign start_book = start[0] -%}
{%- assign start_verses = start[1] | split: ":" -%}
{%- assign start_ch = start_verses[0] -%}
{%- assign start_ver = start_verses[1] -%}
{%- if endings[1] == nil -%}
  {%- assign end_book = start_book -%}
  {%- assign end_ch = start_ch -%}
  {%- assign end_ver = start_ver -%} 
{%- else -%}
  {%- assign end = endings[1] | split: " " -%}
  {%- if end[1] == nil -%}
    {%- assign end_book = start_book -%}
    {%- assign end_verses = end[0] | split: ":" -%}
  {%- else -%}
    {%- assign end_book = end[0] -%}
    {%- assign end_verses = end[1] | split: ":" -%}
  {%- endif -%}
  {%- if end_verses[1] == nil -%}
    {%- assign end_ch = start_ch -%}
    {%- assign end_ver = end_verses[0] -%}
  {%- else -%}
    {%- assign end_ch = end_verses[0] -%}
    {%- assign end_ver = end_verses[1] -%}
  {%- endif -%}
{%- endif -%}

{%- for b in books -%}
  {%- if b.book == start_book -%}
    {%- assign book_index = b.index | minus: 1 -%}
    {%- assign book = bible[book_index] -%}
    {%- break -%}
  {%- endif -%}
{%- endfor -%}

{%- for i in (start_ch..end_ch) -%}
  {%- assign chapter = book[i | minus: 1] -%}
  {%- if i == start_ch -%}
    {%- assign start_v = start_ver -%}
  {%- else -%}
    {%- assign start_v = 1 -%}
  {%- endif -%}
  {%- if i == end_ch -%}
    {%- assign end_v = end_ver -%}
  {%- else -%}
    {%- assign end_v = chapter.size -%}
  {%- endif -%}
  <ol start="{{ start_ver }}">
  {%- for j in (start_v..end_v) -%}
    {%- assign verse = chapter[j | minus: 1 ] -%}
    <li>{{ verse }}</li>
  {%- endfor -%}
  </ol>
{%- endfor -%}

<script>
  console.log({start: {book: "{{ start_book }}", chapter: "{{ start_ch }}",
  verse: "{{ start_ver }}"}, end: {book: "{{ end_book }}", chapter: "{{ end_ch }}",
  verse: "{{ end_ver }}"}})
</script>